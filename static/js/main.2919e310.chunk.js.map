{"version":3,"sources":["reducers/index.ts","context.tsx","InputArea.tsx","OutputArea.tsx","components/FileUploader/presentation.tsx","Convertor/ExpressiveColours.ts","Convertor/index.ts","components/FileUploader/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Types","imageReducer","state","action","type","Upload","file","payload","before","after","converting","Converted","initialState","AppContext","createContext","dispatch","AppProvider","children","React","useReducer","Provider","value","InputArea","useContext","className","alt","src","OutputArea","FileUploaderPresentationalComponent","props","dragging","onSelectFileClick","onDrag","onDragStart","onDragEnd","onDragOver","onDragEnter","onDragLeave","onDrop","uploaderClasses","fileName","name","onClick","EXPRESSIVE_COLOURS","Uint8ClampedArray","getClosestColour","inputColour","closestDistance","Infinity","closestColour","expressiveColour","distance","ConvertImage","image","canvas","document","createElement","width","height","getContext","drawImage","imageData","getImageData","memo","Map","i","data","length","slice","get","join","set","putImageData","toDataURL","dragEventCounter","FileUploader","fileUploaderInput","useState","setData","process","fileReader","FileReader","addEventListener","evt","target","result","toString","img","Image","output","readAsDataURL","overrideEventDefaults","event","preventDefault","stopPropagation","useEffect","window","removeEventListener","click","dataTransfer","items","types","files","split","alert","ref","el","onChange","accept","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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kB,CAAC,IAAK,GAAI,MAChC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,GAAI,KAChC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,GAAI,MAChC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,KACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,KACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,GAAI,MAChC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,KACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,KACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IAAK,IAAK,MACjC,IAAIA,kBAAkB,CAAC,IA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","file":"static/js/main.2919e310.chunk.js","sourcesContent":["import { Reducer } from 'react'\n\ntype ActionMap<M extends { [index: string]: any }> = {\n  [Key in keyof M]: M[Key] extends undefined\n    ? {\n        type: Key\n      }\n    : {\n        type: Key\n        payload: M[Key]\n      }\n}\n\nexport enum Types {\n  Upload = 'UPLOAD_PIC',\n  Converted = 'CONVERT_DONE',\n}\n\ntype ImageType = {\n  file: Blob | null\n  before: string\n  after: string\n  converting: boolean\n}\n\ntype ImagePayload = {\n  [Types.Upload]: {\n    file: Blob\n    before: string\n    converting: boolean\n  }\n  [Types.Converted]: {\n    after: string\n    converting: boolean\n  }\n}\n\nexport type ImageActions =\n  ActionMap<ImagePayload>[keyof ActionMap<ImagePayload>]\n\nexport const imageReducer: Reducer<ImageType, ImageActions> = (\n  state: ImageType,\n  action: ImageActions,\n) => {\n  switch (action.type) {\n    case Types.Upload:\n      return {\n        file: action.payload.file,\n        before: action.payload.before,\n        after: state.after,\n        converting: action.payload.converting,\n      }\n    case Types.Converted:\n      return {\n        file: state.file,\n        before: state.before,\n        after: action.payload.after,\n        converting: action.payload.converting,\n      }\n    default:\n      return state\n  }\n}\n","import React, { createContext, Dispatch } from 'react'\nimport { imageReducer, ImageActions } from './reducers'\n\ntype InitialStateType = {\n  file: Blob | null\n  before: string\n  after: string\n  converting: boolean\n}\n\nconst initialState = {\n  file: null,\n  before: '',\n  after: '',\n  converting: false,\n}\n\nconst AppContext = createContext<{\n  state: InitialStateType\n  dispatch: Dispatch<ImageActions>\n}>({\n  state: initialState,\n  dispatch: () => null,\n})\n\nconst AppProvider: React.FC = ({ children }) => {\n  const [state, dispatch] = React.useReducer(imageReducer, initialState)\n\n  return (\n    <AppContext.Provider value={{ state, dispatch }}>\n      {children}\n    </AppContext.Provider>\n  )\n}\n\nexport { AppProvider, AppContext }\n","import React from 'react'\nimport { AppContext } from './context'\n// import Canvas from './components/Canvas'\n\nconst InputArea = () => {\n  const { state } = React.useContext(AppContext)\n  const { before } = state\n  return (\n    <div className=\"inputBox\">\n      {before ? (\n        <img alt=\"input\" src={before} />\n      ) : (\n        <div>Your picture will be shown here.</div>\n      )}\n    </div>\n  )\n}\n\nexport default InputArea\n","import React from 'react'\nimport { AppContext } from './context'\n// import Canvas from './components/Canvas'\n\nconst OutputArea = () => {\n  const { state } = React.useContext(AppContext)\n  const { after, converting } = state\n  return (\n    <div className=\"outputBox\">\n      {converting ? (\n        <div className=\"loader\"></div>\n      ) : after ? (\n        <img alt=\"output\" src={after} />\n      ) : (\n        <div>Converted picture will be shown here.</div>\n      )}\n    </div>\n  )\n}\n\nexport default OutputArea\n","import React from 'react'\n\ntype PresentationalProps = {\n  dragging: boolean\n  file: File | null\n  onSelectFileClick: () => void\n  onDrag: (event: React.DragEvent<HTMLDivElement>) => void\n  onDragStart: (event: React.DragEvent<HTMLDivElement>) => void\n  onDragEnd: (event: React.DragEvent<HTMLDivElement>) => void\n  onDragOver: (event: React.DragEvent<HTMLDivElement>) => void\n  onDragEnter: (event: React.DragEvent<HTMLDivElement>) => void\n  onDragLeave: (event: React.DragEvent<HTMLDivElement>) => void\n  onDrop: (event: React.DragEvent<HTMLDivElement>) => void\n}\n\nexport const FileUploaderPresentationalComponent: React.FC<PresentationalProps> =\n  (props) => {\n    const {\n      dragging,\n      file,\n      onSelectFileClick,\n      onDrag,\n      onDragStart,\n      onDragEnd,\n      onDragOver,\n      onDragEnter,\n      onDragLeave,\n      onDrop,\n    } = props\n\n    let uploaderClasses = 'file-uploader'\n    if (dragging) {\n      uploaderClasses += ' file-uploader--dragging'\n    }\n\n    const fileName = file ? file.name : 'No File Uploaded!'\n    return (\n      <div\n        className={uploaderClasses}\n        onDrag={onDrag}\n        onDragStart={onDragStart}\n        onDragEnd={onDragEnd}\n        onDragOver={onDragOver}\n        onDragEnter={onDragEnter}\n        onDragLeave={onDragLeave}\n        onDrop={onDrop}\n      >\n        <div className=\"file-uploader__contents\">\n          <span className=\"file-uploader__file-name\">{fileName}</span>\n          <span>Drag & Drop File</span>\n          <span>or</span>\n          <span onClick={onSelectFileClick}>Select File</span>\n          {props.children}\n        </div>\n      </div>\n    )\n  }\n","const EXPRESSIVE_COLOURS = [\n  new Uint8ClampedArray([22, 44, 91]),\n  new Uint8ClampedArray([26, 48, 63]),\n  new Uint8ClampedArray([31, 50, 45]),\n  new Uint8ClampedArray([34, 63, 125]),\n  new Uint8ClampedArray([40, 69, 90]),\n  new Uint8ClampedArray([42, 32, 109]),\n  new Uint8ClampedArray([44, 71, 64]),\n  new Uint8ClampedArray([45, 45, 45]),\n  new Uint8ClampedArray([50, 86, 161]),\n  new Uint8ClampedArray([50, 94, 120]),\n  new Uint8ClampedArray([57, 97, 86]),\n  new Uint8ClampedArray([58, 44, 22]),\n  new Uint8ClampedArray([61, 48, 149]),\n  new Uint8ClampedArray([64, 124, 159]),\n  new Uint8ClampedArray([66, 40, 24]),\n  new Uint8ClampedArray([66, 66, 66]),\n  new Uint8ClampedArray([73, 31, 53]),\n  new Uint8ClampedArray([74, 128, 114]),\n  new Uint8ClampedArray([76, 114, 204]),\n  new Uint8ClampedArray([81, 62, 33]),\n  new Uint8ClampedArray([83, 69, 184]),\n  new Uint8ClampedArray([89, 89, 89]),\n  new Uint8ClampedArray([90, 156, 196]),\n  new Uint8ClampedArray([92, 57, 37]),\n  new Uint8ClampedArray([99, 161, 144]),\n  new Uint8ClampedArray([107, 41, 77]),\n  new Uint8ClampedArray([110, 84, 44]),\n  new Uint8ClampedArray([112, 145, 233]),\n  new Uint8ClampedArray([113, 98, 223]),\n  new Uint8ClampedArray([118, 118, 118]),\n  new Uint8ClampedArray([128, 74, 39]),\n  new Uint8ClampedArray([136, 185, 219]),\n  new Uint8ClampedArray([139, 190, 175]),\n  new Uint8ClampedArray([144, 136, 231]),\n  new Uint8ClampedArray([145, 52, 105]),\n  new Uint8ClampedArray([146, 112, 56]),\n  new Uint8ClampedArray([148, 148, 148]),\n  new Uint8ClampedArray([159, 176, 235]),\n  new Uint8ClampedArray([169, 100, 55]),\n  new Uint8ClampedArray([176, 171, 239]),\n  new Uint8ClampedArray([180, 178, 177]),\n  new Uint8ClampedArray([184, 76, 135]),\n  new Uint8ClampedArray([184, 140, 71]),\n  new Uint8ClampedArray([188, 214, 236]),\n  new Uint8ClampedArray([191, 217, 208]),\n  new Uint8ClampedArray([201, 210, 243]),\n  new Uint8ClampedArray([209, 125, 71]),\n  new Uint8ClampedArray([209, 206, 243]),\n  new Uint8ClampedArray([210, 229, 247]),\n  new Uint8ClampedArray([210, 231, 225]),\n  new Uint8ClampedArray([212, 210, 208]),\n  new Uint8ClampedArray([216, 111, 166]),\n  new Uint8ClampedArray([216, 171, 108]),\n  new Uint8ClampedArray([220, 226, 251]),\n  new Uint8ClampedArray([226, 157, 190]),\n  new Uint8ClampedArray([226, 223, 251]),\n  new Uint8ClampedArray([228, 226, 224]),\n  new Uint8ClampedArray([231, 162, 127]),\n  new Uint8ClampedArray([233, 244, 241]),\n  new Uint8ClampedArray([234, 243, 251]),\n  new Uint8ClampedArray([236, 201, 216]),\n  new Uint8ClampedArray([238, 205, 163]),\n  new Uint8ClampedArray([239, 241, 253]),\n  new Uint8ClampedArray([240, 202, 187]),\n  new Uint8ClampedArray([242, 241, 253]),\n  new Uint8ClampedArray([243, 242, 241]),\n  new Uint8ClampedArray([244, 219, 231]),\n  new Uint8ClampedArray([244, 222, 212]),\n  new Uint8ClampedArray([244, 223, 200]),\n  new Uint8ClampedArray([246, 250, 254]),\n  new Uint8ClampedArray([246, 251, 249]),\n  new Uint8ClampedArray([248, 249, 254]),\n  new Uint8ClampedArray([249, 249, 254]),\n  new Uint8ClampedArray([250, 238, 244]),\n  new Uint8ClampedArray([250, 239, 236]),\n  new Uint8ClampedArray([250, 240, 231]),\n  new Uint8ClampedArray([250, 249, 248]),\n  new Uint8ClampedArray([252, 248, 250]),\n  new Uint8ClampedArray([253, 248, 244]),\n  new Uint8ClampedArray([253, 248, 247]),\n  new Uint8ClampedArray([255, 255, 255]),\n]\n\nexport default EXPRESSIVE_COLOURS\n","import EXPRESSIVE_COLOURS from './ExpressiveColours'\n\ntype Colour = Uint8ClampedArray\n\nconst ConvertImage = (image: HTMLImageElement): string => {\n  const canvas = document.createElement('canvas')\n  canvas.width = image.width\n  canvas.height = image.height\n  canvas.getContext('2d')?.drawImage(image, 0, 0)\n  const imageData = canvas\n    .getContext('2d')\n    ?.getImageData(0, 0, canvas.width, canvas.height)\n  if (!imageData) return ''\n\n  const memo = new Map<string, Colour>()\n\n  for (let i = 0; i < imageData.data.length; i += 4) {\n    const inputColour = imageData.data.slice(i, i + 4)\n\n    let closestColour = memo.get(inputColour.join(','))\n\n    if (!closestColour) {\n      closestColour = getClosestColour(inputColour)\n      memo.set(inputColour.join(','), closestColour)\n    }\n    ;[\n      imageData.data[i],\n      imageData.data[i + 1],\n      imageData.data[i + 2],\n      imageData.data[i + 3],\n    ] = closestColour\n  }\n\n  canvas.getContext('2d')?.putImageData(imageData, 0, 0)\n  return canvas.toDataURL('image/jpg')\n}\n\nfunction getClosestColour(inputColour: Colour): Colour {\n  let closestDistance = Infinity\n  let closestColour = new Uint8ClampedArray([0, 0, 0, 255])\n\n  for (const expressiveColour of EXPRESSIVE_COLOURS) {\n    const distance =\n      (expressiveColour[0] - inputColour[0]) ** 2 +\n      (expressiveColour[1] - inputColour[1]) ** 2 +\n      (expressiveColour[2] - inputColour[2]) ** 2\n\n    if (distance < closestDistance) {\n      closestDistance = distance\n      closestColour = expressiveColour\n    }\n\n    if (closestDistance === 0)\n      return new Uint8ClampedArray([...closestColour, inputColour[3]])\n  }\n\n  return new Uint8ClampedArray([...closestColour, inputColour[3]])\n}\nexport default ConvertImage\n","import React, { useEffect } from 'react'\nimport { FileUploaderPresentationalComponent } from './presentation'\nimport { AppContext } from '../../context'\nimport { Types } from '../../reducers'\nimport ConvertImage from '../../Convertor'\n\ntype State = {\n  dragging: boolean\n  file: File | null\n}\n\nlet dragEventCounter = 0\nexport const FileUploader = () => {\n  let { dispatch } = React.useContext(AppContext)\n  const initialState: State = {\n    dragging: false,\n    file: null,\n  }\n  // static counter = 0;\n  let fileUploaderInput: HTMLElement | null = null\n\n  const [data, setData] = React.useState(initialState)\n\n  let process = (file: Blob) => {\n    const fileReader = new FileReader()\n    fileReader.addEventListener('loadend', (evt) => {\n      if (evt.target?.result) {\n        dispatch({\n          type: Types.Upload,\n          payload: {\n            file: file,\n            before: evt.target.result.toString(),\n            converting: true,\n          },\n        })\n        const img = new Image()\n        img.addEventListener('load', () => {\n          let output = ConvertImage(img)\n          dispatch({\n            type: Types.Converted,\n            payload: {\n              after: output,\n              converting: false,\n            },\n          })\n        })\n        img.src = evt.target.result.toString()\n      }\n    })\n    fileReader.readAsDataURL(file)\n  }\n  let dragenterListener = (event: React.DragEvent<HTMLDivElement>) => {\n    overrideEventDefaults(event)\n    dragEventCounter++\n    if (event.dataTransfer.items && event.dataTransfer.items[0]) {\n      setData({ ...data, dragging: true })\n    } else if (\n      event.dataTransfer.types &&\n      event.dataTransfer.types[0] === 'Files'\n    ) {\n      // This block handles support for IE - if you're not worried about\n      // that, you can omit this\n      setData({ ...data, dragging: true })\n    }\n  }\n\n  let dragleaveListener = (event: React.DragEvent<HTMLDivElement>) => {\n    overrideEventDefaults(event)\n    dragEventCounter--\n\n    if (dragEventCounter <= 0) {\n      setData({ ...data, dragging: false })\n    }\n  }\n\n  let dropListener = (event: React.DragEvent<HTMLDivElement>) => {\n    overrideEventDefaults(event)\n    dragEventCounter = 0\n    setData({ ...data, dragging: false })\n\n    if (event.dataTransfer.files && event.dataTransfer.files[0]) {\n      if (event.dataTransfer.items[0].type.split('/')[0] === 'image') {\n        setData({ ...data, file: event.dataTransfer.files[0] })\n        process(event.dataTransfer.files[0])\n      } else alert('Please upload an image.')\n    }\n  }\n\n  let overrideEventDefaults = (\n    event: Event | React.DragEvent<HTMLDivElement>,\n  ) => {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n\n  let onSelectFileClick = () => {\n    fileUploaderInput && fileUploaderInput.click()\n  }\n\n  let onFileChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      setData({ ...data, file: event.target.files[0] })\n      process(event.target.files[0])\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('dragover', (event: Event) => {\n      overrideEventDefaults(event)\n    })\n    window.addEventListener('drop', (event: Event) => {\n      overrideEventDefaults(event)\n    })\n    return () => {\n      window.removeEventListener('dragover', overrideEventDefaults)\n      window.removeEventListener('drop', overrideEventDefaults)\n    }\n  })\n\n  return (\n    <FileUploaderPresentationalComponent\n      dragging={data.dragging}\n      file={data.file}\n      onSelectFileClick={onSelectFileClick}\n      onDrag={overrideEventDefaults}\n      onDragStart={overrideEventDefaults}\n      onDragEnd={overrideEventDefaults}\n      onDragOver={overrideEventDefaults}\n      onDragEnter={dragenterListener}\n      onDragLeave={dragleaveListener}\n      onDrop={dropListener}\n    >\n      <input\n        ref={(el) => (fileUploaderInput = el)}\n        type=\"file\"\n        className=\"file-uploader__input\"\n        onChange={onFileChanged}\n        accept=\"image/*\"\n      />\n    </FileUploaderPresentationalComponent>\n  )\n}\n","// import React from 'react'\nimport './App.css'\nimport { AppProvider } from 'context'\nimport InputArea from './InputArea'\nimport OutputArea from './OutputArea'\nimport { FileUploader } from 'components/FileUploader'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppProvider>\n        <FileUploader />\n        <div className=\"pictureBox\">\n          <InputArea />\n          <OutputArea />\n        </div>\n      </AppProvider>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}